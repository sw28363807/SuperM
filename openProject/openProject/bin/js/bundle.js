var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */


var _BigItem = require("./view/BigItem");

var _BigItem2 = _interopRequireDefault(_BigItem);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameConfig = function () {
    function GameConfig() {
        _classCallCheck(this, GameConfig);
    }

    _createClass(GameConfig, null, [{
        key: "init",
        value: function init() {
            //注册Script或者Runtime引用
            var reg = Laya.ClassUtils.regClass;
            reg("view/BigItem.js", _BigItem2.default);
        }
    }]);

    return GameConfig;
}();

exports.default = GameConfig;

GameConfig.width = 1336;
GameConfig.height = 750;
GameConfig.scaleMode = "fixedwidth";
GameConfig.screenMode = "none";
GameConfig.alignV = "top";
GameConfig.alignH = "left";
GameConfig.startScene = "test/BigItem.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;

GameConfig.init();

},{"./view/BigItem":4}],2:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameConfig = require("./GameConfig");

var _GameConfig2 = _interopRequireDefault(_GameConfig);

var _BigRank = require("./view/BigRank");

var _BigRank2 = _interopRequireDefault(_BigRank);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Main = function () {
	function Main() {
		_classCallCheck(this, Main);

		Laya.isWXOpenDataContext = true;
		Laya.isWXPosMsg = true;
		//根据IDE设置初始化引擎		
		Laya.init(_GameConfig2.default.width, _GameConfig2.default.height, false);
		//根据IDE设置初始化引擎		
		Laya.stage.scaleMode = _GameConfig2.default.scaleMode;
		Laya.stage.screenMode = _GameConfig2.default.screenMode;
		Laya.stage.alignV = _GameConfig2.default.alignV;
		Laya.stage.alignH = _GameConfig2.default.alignH;
		this.isInit = false;
		// 关于透传接口，请参考: https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-7
		if (Laya.Browser.onMiniGame) wx.onMessage(function (data) {
			this.onComplete();
		}.bind(this));else {
			this.onComplete();
		}
	}

	_createClass(Main, [{
		key: "onComplete",
		value: function onComplete() {
			if (this.isInit == true) {
				return;
			}
			this.isInit = true;
			//加载IDE指定的场景
			var big = new _BigRank2.default();
			big.init();
		}
	}]);

	return Main;
}();
//激活启动类


new Main();

},{"./GameConfig":1,"./view/BigRank":5}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var View = laya.ui.View;
var Dialog = laya.ui.Dialog;
var Scene = Laya.Scene;
var REG = Laya.ClassUtils.regClass;

var BigUI = exports.BigUI = function (_View) {
	_inherits(BigUI, _View);

	function BigUI() {
		_classCallCheck(this, BigUI);

		return _possibleConstructorReturn(this, (BigUI.__proto__ || Object.getPrototypeOf(BigUI)).call(this));
	}

	_createClass(BigUI, [{
		key: "createChildren",
		value: function createChildren() {
			_get(BigUI.prototype.__proto__ || Object.getPrototypeOf(BigUI.prototype), "createChildren", this).call(this);
			this.createView(BigUI.uiView);
		}
	}]);

	return BigUI;
}(View);

BigUI.uiView = { "type": "View", "props": { "width": 1336, "height": 750 }, "compId": 2, "child": [{ "type": "List", "props": { "y": 75, "x": 375, "width": 585, "var": "_list", "vScrollBarSkin": " ", "spaceY": 10, "repeatX": 1, "height": 600, "elasticEnabled": true, "bgColor": "#6a8d87" }, "compId": 3, "child": [{ "type": "bigItem", "props": { "runtime": "view/BigItem.js", "renderType": "render" }, "compId": 5 }] }], "loadList": [], "loadList3D": [] };
REG("ui.test.BigUI", BigUI);

var BigItemUI = exports.BigItemUI = function (_View2) {
	_inherits(BigItemUI, _View2);

	function BigItemUI() {
		_classCallCheck(this, BigItemUI);

		return _possibleConstructorReturn(this, (BigItemUI.__proto__ || Object.getPrototypeOf(BigItemUI)).call(this));
	}

	_createClass(BigItemUI, [{
		key: "createChildren",
		value: function createChildren() {
			_get(BigItemUI.prototype.__proto__ || Object.getPrototypeOf(BigItemUI.prototype), "createChildren", this).call(this);
			this.createView(BigItemUI.uiView);
		}
	}]);

	return BigItemUI;
}(View);

BigItemUI.uiView = { "type": "View", "props": { "width": 580, "renderType": "render", "height": 100 }, "compId": 2, "child": [{ "type": "Sprite", "props": { "y": 6, "x": 3, "width": 575, "texture": "loading/bigaaaaa.png", "height": 86 }, "compId": 7 }, { "type": "Image", "props": { "y": 11, "x": 151, "width": 75, "var": "img_head", "height": 75 }, "compId": 3, "child": [{ "type": "Sprite", "props": { "y": -1, "x": -1, "width": 82, "renderType": "mask", "height": 82 }, "compId": 10 }] }, { "type": "Label", "props": { "y": 16, "x": 275, "width": 259, "var": "text_name", "text": "名字", "strokeColor": "#3e567f", "stroke": 1, "overflow": "scroll", "height": 36, "fontSize": 36, "color": "#b9c622", "align": "center" }, "compId": 4 }, { "type": "Label", "props": { "y": 60, "x": 408, "var": "text_score", "text": "分数", "fontSize": 20, "color": "#c8dd30", "align": "left" }, "compId": 5 }, { "type": "Label", "props": { "y": 36, "x": 45, "width": 50, "var": "text_rank", "text": "999", "fontSize": 28, "color": "#c8dd30", "align": "center" }, "compId": 12 }, { "type": "Label", "props": { "y": 60, "x": 357, "text": "分数:", "fontSize": 20, "color": "#ffffff", "align": "center" }, "compId": 11 }, { "type": "Sprite", "props": { "y": 29, "x": 46, "var": "rank1", "texture": "loading/rank1.png", "name": "rank1" }, "compId": 13 }, { "type": "Sprite", "props": { "y": 29, "x": 46, "var": "rank2", "texture": "loading/rank2.png", "name": "rank2" }, "compId": 14 }, { "type": "Sprite", "props": { "y": 29, "x": 46, "var": "rank3", "texture": "loading/rank3.png", "name": "rank3" }, "compId": 16 }], "loadList": ["loading/bigaaaaa.png", "loading/rank1.png", "loading/rank2.png", "loading/rank3.png"], "loadList3D": [] };
REG("ui.test.BigItemUI", BigItemUI);

},{}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _layaMaxUI = require("../ui/layaMaxUI");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BigItem = function (_BigItemUI) {
    _inherits(BigItem, _BigItemUI);

    function BigItem() {
        _classCallCheck(this, BigItem);

        return _possibleConstructorReturn(this, (BigItem.__proto__ || Object.getPrototypeOf(BigItem)).call(this));
    }

    _createClass(BigItem, [{
        key: "dataSource",
        set: function set(value) {
            if (!value) return;
            var rankNumber = value.rankIndex + 1;
            this.text_rank.text = String(rankNumber);
            this.img_head.skin = value.avatarIP;
            this.text_name.text = value.UserName;
            this.text_score.text = value.RankValue;

            if (rankNumber == 1) {
                this.text_rank.text.visible = false;
                this.rank1.visible = true;
                this.rank2.visible = false;
                this.rank3.visible = false;
            } else if (rankNumber == 2) {
                this.text_rank.text.visible = false;
                this.rank1.visible = false;
                this.rank2.visible = true;
                this.rank3.visible = false;
            } else if (rankNumber == 3) {
                this.text_rank.text.visible = false;
                this.rank1.visible = false;
                this.rank2.visible = false;
                this.rank3.visible = true;
            } else {
                this.text_rank.text.visible = true;
                this.rank1.visible = false;
                this.rank2.visible = false;
                this.rank3.visible = false;
            }
        }
    }]);

    return BigItem;
}(_layaMaxUI.BigItemUI);

exports.default = BigItem;

},{"../ui/layaMaxUI":3}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _layaMaxUI = require("../ui/layaMaxUI");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BigRank = function (_BigUI) {
    _inherits(BigRank, _BigUI);

    function BigRank() {
        _classCallCheck(this, BigRank);

        var _this = _possibleConstructorReturn(this, (BigRank.__proto__ || Object.getPrototypeOf(BigRank)).call(this));

        _this._key = "test10086";
        _this.isdownLoadRank = false;
        //默认数据
        _this.arr = [
            // {index:1,avatarIP:'test/4.png',UserName:"测试用户1",RankValue:100},
            // {index:2,avatarIP:'test/4.png',UserName:"测试用户2",RankValue:75},
            // {index:3,avatarIP:'test/4.png',UserName:"测试用户3",RankValue:50},
            // {index:4,avatarIP:'test/4.png',UserName:"测试用户4",RankValue:25}
        ];
        return _this;
    }

    _createClass(BigRank, [{
        key: "init",
        value: function init() {
            //将场景加到舞台上
            Laya.stage.addChild(this);
            this.zOrder = 99999;
            //设置默认数据
            this.setlist(this.arr);
            // Laya.stage.visible  = false;
            if (Laya.Browser.onMiniGame) {
                //接受来自主域的信息
                wx.onMessage(this.recevieData.bind(this));
                // 直接展示数据
                // this.getFriendData();
            }
        }

        /**
         * 获取好友排行
         */

    }, {
        key: "getFriendData",
        value: function getFriendData() {
            if (this.isdownLoadRank == true) {
                return;
            }
            this.isdownLoadRank = true;
            var _$this = this;
            wx.getFriendCloudStorage({
                keyList: ["fenRank"],
                success: function success(res) {
                    console.log("+++++++++++++++++++++++++++++");
                    console.log(res);
                    //关于拿到的数据详细情况可以产看微信文档
                    //https://developers.weixin.qq.com/minigame/dev/api/UserGameData.html
                    var listData;
                    var obj;
                    var kv;
                    var arr = [];
                    console.log('-----------------getFriendCloudStorage------------');
                    if (res.data) {
                        for (var i = 0; i < res.data.length; i++) {
                            obj = res.data[i];
                            if (!obj.KVDataList.length) continue;
                            //拉取数据是，使用了多少个key- KVDataList的数组就有多少
                            //更详细的KVData可以查看微信文档:https://developers.weixin.qq.com/minigame/dev/api/KVData.html
                            kv = obj.KVDataList[0];
                            if (kv.key != "fenRank") continue;
                            kv = JSON.parse(kv.value);
                            listData = {};
                            listData.avatarIP = obj.avatarUrl;
                            listData.UserName = obj.nickname;
                            listData.openID = obj.openid;
                            listData.RankValue = kv.wxgame.value1;
                            listData.rankIndex = i;
                            // listData.update_time=kv.wxgame.update_time;
                            arr.push(listData);
                            console.debug(listData);
                        }
                        //根据RankValue排序
                        arr = arr.sort(function (a, b) {
                            return b.RankValue - a.RankValue;
                        });
                        //增加一个用于查看的index排名
                        for (var i = 0; i < arr.length; i++) {
                            arr[i].index = i + 1;
                        }
                        //设置数组
                        _$this.setlist(arr);
                    }
                },
                fail: function fail(data) {
                    console.log('------------------获取托管数据失败--------------------');
                    console.log(data);
                }
            });
        }
        /**
         * 接收信息
         * @param message 收到的主域传过来的信息
         */

    }, {
        key: "recevieData",
        value: function recevieData(message) {
            if (message.fen != null && message.fen != undefined) {
                this.fen = message.fen;
                this.key = message.key;
                this.setSelfData();
            }
        }
        /**
         * 上报自己的数据
         * @param data 上报数据
         */

    }, {
        key: "setSelfData",
        value: function setSelfData(data) {
            var kvDataList = [];
            var obj = {};
            obj.wxgame = {};
            obj.wxgame.value1 = String(this.fen);
            console.log("MyData: " + obj.wxgame.value1);
            var outSelf = this;
            // obj.wxgame.update_time  = Laya.Browser.now();
            kvDataList.push({ "key": "fenRank", "value": JSON.stringify(obj) });
            wx.setUserCloudStorage({
                KVDataList: kvDataList,
                success: function success(e) {
                    console.log('-----success:' + JSON.stringify(e));
                    outSelf.getFriendData();
                },
                fail: function fail(e) {
                    console.log('-----fail:' + JSON.stringify(e));
                    outSelf.getFriendData();
                },
                complete: function complete(e) {
                    console.log('-----complete:' + JSON.stringify(e));
                    outSelf.getFriendData();
                }
            });
        }

        /**
         * 设置list arr
         * @param arr 赋值用的arr
         */

    }, {
        key: "setlist",
        value: function setlist(arr) {
            this._list.array = arr;
            this._list.refresh();
        }
    }]);

    return BigRank;
}(_layaMaxUI.BigUI);

exports.default = BigRank;

},{"../ui/layaMaxUI":3}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL0xheWFBaXJJREUvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcuanMiLCJzcmMvTWFpbi5qcyIsInNyYy91aS9sYXlhTWF4VUkuanMiLCJzcmMvdmlldy9CaWdJdGVtLmpzIiwic3JjL3ZpZXcvQmlnUmFuay5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O3FqQkNWQTs7O0FBQ0E7Ozs7Ozs7O0lBRXFCLFU7Ozs7Ozs7K0JBQ0g7QUFDVjtBQUNBLGdCQUFJLE1BQU0sS0FBSyxVQUFMLENBQWdCLFFBQTFCO0FBQ04sZ0JBQUksaUJBQUosRUFBc0IsaUJBQXRCO0FBQ0c7Ozs7OztrQkFMZ0IsVTs7QUFPckIsV0FBVyxLQUFYLEdBQW1CLElBQW5CO0FBQ0EsV0FBVyxNQUFYLEdBQW9CLEdBQXBCO0FBQ0EsV0FBVyxTQUFYLEdBQXNCLFlBQXRCO0FBQ0EsV0FBVyxVQUFYLEdBQXdCLE1BQXhCO0FBQ0EsV0FBVyxNQUFYLEdBQW9CLEtBQXBCO0FBQ0EsV0FBVyxNQUFYLEdBQW9CLE1BQXBCO0FBQ0EsV0FBVyxVQUFYLEdBQXdCLG9CQUF4QjtBQUNBLFdBQVcsU0FBWCxHQUF1QixFQUF2QjtBQUNBLFdBQVcsS0FBWCxHQUFtQixLQUFuQjtBQUNBLFdBQVcsSUFBWCxHQUFrQixLQUFsQjtBQUNBLFdBQVcsWUFBWCxHQUEwQixLQUExQjtBQUNBLFdBQVcsaUJBQVgsR0FBK0IsSUFBL0I7O0FBRUEsV0FBVyxJQUFYOzs7Ozs7O0FDdkJBOzs7O0FBQ0E7Ozs7Ozs7O0lBQ00sSTtBQUNMLGlCQUFjO0FBQUE7O0FBQ2IsT0FBSyxtQkFBTCxHQUEyQixJQUEzQjtBQUNBLE9BQUssVUFBTCxHQUFrQixJQUFsQjtBQUNBO0FBQ0EsT0FBSyxJQUFMLENBQVUscUJBQVcsS0FB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ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8qKlRoaXMgY2xhc3MgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgTGF5YUFpcklERSwgcGxlYXNlIGRvIG5vdCBtYWtlIGFueSBtb2RpZmljYXRpb25zLiAqL1xyXG5pbXBvcnQgQmlnSXRlbSBmcm9tIFwiLi92aWV3L0JpZ0l0ZW1cIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbmZpZyB7XHJcbiAgICBzdGF0aWMgaW5pdCgpIHtcclxuICAgICAgICAvL+azqOWGjFNjcmlwdOaIluiAhVJ1bnRpbWXlvJXnlKhcclxuICAgICAgICBsZXQgcmVnID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xyXG5cdFx0cmVnKFwidmlldy9CaWdJdGVtLmpzXCIsQmlnSXRlbSk7XHJcbiAgICB9XHJcbn1cclxuR2FtZUNvbmZpZy53aWR0aCA9IDEzMzY7XHJcbkdhbWVDb25maWcuaGVpZ2h0ID0gNzUwO1xyXG5HYW1lQ29uZmlnLnNjYWxlTW9kZSA9XCJmaXhlZHdpZHRoXCI7XHJcbkdhbWVDb25maWcuc2NyZWVuTW9kZSA9IFwibm9uZVwiO1xyXG5HYW1lQ29uZmlnLmFsaWduViA9IFwidG9wXCI7XHJcbkdhbWVDb25maWcuYWxpZ25IID0gXCJsZWZ0XCI7XHJcbkdhbWVDb25maWcuc3RhcnRTY2VuZSA9IFwidGVzdC9CaWdJdGVtLnNjZW5lXCI7XHJcbkdhbWVDb25maWcuc2NlbmVSb290ID0gXCJcIjtcclxuR2FtZUNvbmZpZy5kZWJ1ZyA9IGZhbHNlO1xyXG5HYW1lQ29uZmlnLnN0YXQgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbiA9IHRydWU7XHJcblxyXG5HYW1lQ29uZmlnLmluaXQoKTtcclxuIiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4vR2FtZUNvbmZpZ1wiO1xyXG5pbXBvcnQgQmlnUmFuayBmcm9tIFwiLi92aWV3L0JpZ1JhbmtcIjtcclxuY2xhc3MgTWFpbiB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHRMYXlhLmlzV1hPcGVuRGF0YUNvbnRleHQgPSB0cnVlO1xyXG5cdFx0TGF5YS5pc1dYUG9zTXNnID0gdHJ1ZTtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0TGF5YS5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0LGZhbHNlKTtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdExheWEuc3RhZ2UuYWxpZ25WID0gR2FtZUNvbmZpZy5hbGlnblY7XHJcblx0XHRMYXlhLnN0YWdlLmFsaWduSCA9IEdhbWVDb25maWcuYWxpZ25IO1xyXG5cdFx0dGhpcy5pc0luaXQgPSBmYWxzZTtcclxuXHRcdC8vIOWFs+S6jumAj+S8oOaOpeWPo++8jOivt+WPguiAgzogaHR0cHM6Ly9sZGMyLmxheWFib3guY29tL2RvYy8/bmF2PXpoLXRzLTUtMC03XHJcblx0XHRpZihMYXlhLkJyb3dzZXIub25NaW5pR2FtZSlcclxuXHRcdFx0XHR3eC5vbk1lc3NhZ2UoZnVuY3Rpb24oZGF0YSkge1xyXG5cdFx0XHRcdFx0dGhpcy5vbkNvbXBsZXRlKCk7XHJcblx0XHRcdFx0fS5iaW5kKHRoaXMpKTtcclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLm9uQ29tcGxldGUoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdG9uQ29tcGxldGUoKSB7XHJcblx0XHRpZiAodGhpcy5pc0luaXQgPT0gdHJ1ZSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHR0aGlzLmlzSW5pdCA9IHRydWU7XHJcblx0XHQvL+WKoOi9vUlEReaMh+WumueahOWcuuaZr1xyXG5cdFx0dmFyIGJpZyA9IG5ldyBCaWdSYW5rKCk7XHJcblx0XHRiaWcuaW5pdCgpO1xyXG5cdH1cclxufVxyXG4vL+a/gOa0u+WQr+WKqOexu1xyXG5uZXcgTWFpbigpO1xyXG4iLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cbnZhciBWaWV3PWxheWEudWkuVmlldztcclxudmFyIERpYWxvZz1sYXlhLnVpLkRpYWxvZztcclxudmFyIFNjZW5lPUxheWEuU2NlbmU7XG52YXIgUkVHID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xuZXhwb3J0IGNsYXNzIEJpZ1VJIGV4dGVuZHMgVmlldyB7XHJcblx0Y29uc3RydWN0b3IoKXsgXHJcblx0XHRzdXBlcigpO1xyXG5cdH1cclxuXHRjcmVhdGVDaGlsZHJlbigpIHtcclxuXHRcdHN1cGVyLmNyZWF0ZUNoaWxkcmVuKCk7XHJcblx0XHR0aGlzLmNyZWF0ZVZpZXcoQmlnVUkudWlWaWV3KTtcclxuXHR9XHJcblx0XHJcbn1cclxuQmlnVUkudWlWaWV3PXtcInR5cGVcIjpcIlZpZXdcIixcInByb3BzXCI6e1wid2lkdGhcIjoxMzM2LFwiaGVpZ2h0XCI6NzUwfSxcImNvbXBJZFwiOjIsXCJjaGlsZFwiOlt7XCJ0eXBlXCI6XCJMaXN0XCIsXCJwcm9wc1wiOntcInlcIjo3NSxcInhcIjozNzUsXCJ3aWR0aFwiOjU4NSxcInZhclwiOlwiX2xpc3RcIixcInZTY3JvbGxCYXJTa2luXCI6XCIgXCIsXCJzcGFjZVlcIjoxMCxcInJlcGVhdFhcIjoxLFwiaGVpZ2h0XCI6NjAwLFwiZWxhc3RpY0VuYWJsZWRcIjp0cnVlLFwiYmdDb2xvclwiOlwiIzZhOGQ4N1wifSxcImNvbXBJZFwiOjMsXCJjaGlsZFwiOlt7XCJ0eXBlXCI6XCJiaWdJdGVtXCIsXCJwcm9wc1wiOntcInJ1bnRpbWVcIjpcInZpZXcvQmlnSXRlbS5qc1wiLFwicmVuZGVyVHlwZVwiOlwicmVuZGVyXCJ9LFwiY29tcElkXCI6NX1dfV0sXCJsb2FkTGlzdFwiOltdLFwibG9hZExpc3QzRFwiOltdfTtcclxuUkVHKFwidWkudGVzdC5CaWdVSVwiLEJpZ1VJKTtcbmV4cG9ydCBjbGFzcyBCaWdJdGVtVUkgZXh0ZW5kcyBWaWV3IHtcclxuXHRjb25zdHJ1Y3RvcigpeyBcclxuXHRcdHN1cGVyKCk7XHJcblx0fVxyXG5cdGNyZWF0ZUNoaWxkcmVuKCkge1xyXG5cdFx0c3VwZXIuY3JlYXRlQ2hpbGRyZW4oKTtcclxuXHRcdHRoaXMuY3JlYXRlVmlldyhCaWdJdGVtVUkudWlWaWV3KTtcclxuXHR9XHJcblx0XHJcbn1cclxuQmlnSXRlbVVJLnVpVmlldz17XCJ0eXBlXCI6XCJWaWV3XCIsXCJwcm9wc1wiOntcIndpZHRoXCI6NTgwLFwicmVuZGVyVHlwZVwiOlwicmVuZGVyXCIsXCJoZWlnaHRcIjoxMDB9LFwiY29tcElkXCI6MixcImNoaWxkXCI6W3tcInR5cGVcIjpcIlNwcml0ZVwiLFwicHJvcHNcIjp7XCJ5XCI6NixcInhcIjozLFwid2lkdGhcIjo1NzUsXCJ0ZXh0dXJlXCI6XCJsb2FkaW5nL2JpZ2FhYWFhLnBuZ1wiLFwiaGVpZ2h0XCI6ODZ9LFwiY29tcElkXCI6N30se1widHlwZVwiOlwiSW1hZ2VcIixcInByb3BzXCI6e1wieVwiOjExLFwieFwiOjE1MSxcIndpZHRoXCI6NzUsXCJ2YXJcIjpcImltZ19oZWFkXCIsXCJoZWlnaHRcIjo3NX0sXCJjb21wSWRcIjozLFwiY2hpbGRcIjpbe1widHlwZVwiOlwiU3ByaXRlXCIsXCJwcm9wc1wiOntcInlcIjotMSxcInhcIjotMSxcIndpZHRoXCI6ODIsXCJyZW5kZXJUeXBlXCI6XCJtYXNrXCIsXCJoZWlnaHRcIjo4Mn0sXCJjb21wSWRcIjoxMH1dfSx7XCJ0eXBlXCI6XCJMYWJlbFwiLFwicHJvcHNcIjp7XCJ5XCI6MTYsXCJ4XCI6Mjc1LFwid2lkdGhcIjoyNTksXCJ2YXJcIjpcInRleHRfbmFtZVwiLFwidGV4dFwiOlwi5ZCN5a2XXCIsXCJzdHJva2VDb2xvclwiOlwiIzNlNTY3ZlwiLFwic3Ryb2tlXCI6MSxcIm92ZXJmbG93XCI6XCJzY3JvbGxcIixcImhlaWdodFwiOjM2LFwiZm9udFNpemVcIjozNixcImNvbG9yXCI6XCIjYjljNjIyXCIsXCJhbGlnblwiOlwiY2VudGVyXCJ9LFwiY29tcElkXCI6NH0se1widHlwZVwiOlwiTGFiZWxcIixcInByb3BzXCI6e1wieVwiOjYwLFwieFwiOjQwOCxcInZhclwiOlwidGV4dF9zY29yZVwiLFwidGV4dFwiOlwi5YiG5pWwXCIsXCJmb250U2l6ZVwiOjIwLFwiY29sb3JcIjpcIiNjOGRkMzBcIixcImFsaWduXCI6XCJsZWZ0XCJ9LFwiY29tcElkXCI6NX0se1widHlwZVwiOlwiTGFiZWxcIixcInByb3BzXCI6e1wieVwiOjM2LFwieFwiOjQ1LFwid2lkdGhcIjo1MCxcInZhclwiOlwidGV4dF9yYW5rXCIsXCJ0ZXh0XCI6XCI5OTlcIixcImZvbnRTaXplXCI6MjgsXCJjb2xvclwiOlwiI2M4ZGQzMFwiLFwiYWxpZ25cIjpcImNlbnRlclwifSxcImNvbXBJZFwiOjEyfSx7XCJ0eXBlXCI6XCJMYWJlbFwiLFwicHJvcHNcIjp7XCJ5XCI6NjAsXCJ4XCI6MzU3LFwidGV4dFwiOlwi5YiG5pWwOlwiLFwiZm9udFNpemVcIjoyMCxcImNvbG9yXCI6XCIjZmZmZmZmXCIsXCJhbGlnblwiOlwiY2VudGVyXCJ9LFwiY29tcElkXCI6MTF9LHtcInR5cGVcIjpcIlNwcml0ZVwiLFwicHJvcHNcIjp7XCJ5XCI6MjksXCJ4XCI6NDYsXCJ2YXJcIjpcInJhbmsxXCIsXCJ0ZXh0dXJlXCI6XCJsb2FkaW5nL3JhbmsxLnBuZ1wiLFwibmFtZVwiOlwicmFuazFcIn0sXCJjb21wSWRcIjoxM30se1widHlwZVwiOlwiU3ByaXRlXCIsXCJwcm9wc1wiOntcInlcIjoyOSxcInhcIjo0NixcInZhclwiOlwicmFuazJcIixcInRleHR1cmVcIjpcImxvYWRpbmcvcmFuazIucG5nXCIsXCJuYW1lXCI6XCJyYW5rMlwifSxcImNvbXBJZFwiOjE0fSx7XCJ0eXBlXCI6XCJTcHJpdGVcIixcInByb3BzXCI6e1wieVwiOjI5LFwieFwiOjQ2LFwidmFyXCI6XCJyYW5rM1wiLFwidGV4dHVyZVwiOlwibG9hZGluZy9yYW5rMy5wbmdcIixcIm5hbWVcIjpcInJhbmszXCJ9LFwiY29tcElkXCI6MTZ9XSxcImxvYWRMaXN0XCI6W1wibG9hZGluZy9iaWdhYWFhYS5wbmdcIixcImxvYWRpbmcvcmFuazEucG5nXCIsXCJsb2FkaW5nL3JhbmsyLnBuZ1wiLFwibG9hZGluZy9yYW5rMy5wbmdcIl0sXCJsb2FkTGlzdDNEXCI6W119O1xyXG5SRUcoXCJ1aS50ZXN0LkJpZ0l0ZW1VSVwiLEJpZ0l0ZW1VSSk7IiwiaW1wb3J0IHsgQmlnSXRlbVVJIH0gZnJvbSBcIi4uL3VpL2xheWFNYXhVSVwiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdJdGVtIGV4dGVuZHMgQmlnSXRlbVVJIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpeyBcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBkYXRhU291cmNlKHZhbHVlKXtcclxuICAgICAgICBpZighdmFsdWUpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgbGV0IHJhbmtOdW1iZXIgPSB2YWx1ZS5yYW5rSW5kZXggKyAxO1xyXG4gICAgICAgICAgICB0aGlzLnRleHRfcmFuay50ZXh0ID0gU3RyaW5nKHJhbmtOdW1iZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmltZ19oZWFkLnNraW4gPSB2YWx1ZS5hdmF0YXJJUDtcclxuICAgICAgICAgICAgdGhpcy50ZXh0X25hbWUudGV4dCA9IHZhbHVlLlVzZXJOYW1lO1xyXG4gICAgICAgICAgICB0aGlzLnRleHRfc2NvcmUudGV4dCA9IHZhbHVlLlJhbmtWYWx1ZTtcclxuXHJcblxyXG4gICAgICAgICAgICBpZiAocmFua051bWJlciA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRfcmFuay50ZXh0LnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuazEudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmsyLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuazMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJhbmtOdW1iZXIgPT0gMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0X3JhbmsudGV4dC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmsxLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuazIudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmszLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyYW5rTnVtYmVyID09IDMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGV4dF9yYW5rLnRleHQudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYW5rMS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmsyLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuazMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRfcmFuay50ZXh0LnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYW5rMS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmsyLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuazMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBCaWdVSSB9IGZyb20gXCIuLi91aS9sYXlhTWF4VUlcIlxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdSYW5rIGV4dGVuZHMgQmlnVUkge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkgeyBcclxuICAgICAgICBzdXBlcigpOyBcclxuICAgICAgICB0aGlzLl9rZXkgPSBcInRlc3QxMDA4NlwiO1xyXG4gICAgICAgIHRoaXMuaXNkb3duTG9hZFJhbmsgPSBmYWxzZTtcclxuICAgICAgICAvL+m7mOiupOaVsOaNrlxyXG4gICAgICAgIHRoaXMuYXJyID0gW1xyXG4gICAgICAgICAgICAvLyB7aW5kZXg6MSxhdmF0YXJJUDondGVzdC80LnBuZycsVXNlck5hbWU6XCLmtYvor5XnlKjmiLcxXCIsUmFua1ZhbHVlOjEwMH0sXHJcbiAgICAgICAgICAgIC8vIHtpbmRleDoyLGF2YXRhcklQOid0ZXN0LzQucG5nJyxVc2VyTmFtZTpcIua1i+ivleeUqOaItzJcIixSYW5rVmFsdWU6NzV9LFxyXG4gICAgICAgICAgICAvLyB7aW5kZXg6MyxhdmF0YXJJUDondGVzdC80LnBuZycsVXNlck5hbWU6XCLmtYvor5XnlKjmiLczXCIsUmFua1ZhbHVlOjUwfSxcclxuICAgICAgICAgICAgLy8ge2luZGV4OjQsYXZhdGFySVA6J3Rlc3QvNC5wbmcnLFVzZXJOYW1lOlwi5rWL6K+V55So5oi3NFwiLFJhbmtWYWx1ZToyNX1cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpbml0KCl7XHJcbiAgICAgICAgLy/lsIblnLrmma/liqDliLDoiJ7lj7DkuIpcclxuICAgICAgICBMYXlhLnN0YWdlLmFkZENoaWxkKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuek9yZGVyID0gOTk5OTk7XHJcbiAgICAgICAgLy/orr7nva7pu5jorqTmlbDmja5cclxuICAgICAgICB0aGlzLnNldGxpc3QodGhpcy5hcnIpO1xyXG4gICAgICAgIC8vIExheWEuc3RhZ2UudmlzaWJsZSAgPSBmYWxzZTtcclxuICAgICAgICBpZihMYXlhLkJyb3dzZXIub25NaW5pR2FtZSl7XHJcbiAgICAgICAgICAgIC8v5o6l5Y+X5p2l6Ieq5Li75Z+f55qE5L+h5oGvXHJcbiAgICAgICAgICAgIHd4Lm9uTWVzc2FnZSh0aGlzLnJlY2V2aWVEYXRhLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAvLyDnm7TmjqXlsZXnpLrmlbDmja5cclxuICAgICAgICAgICAgLy8gdGhpcy5nZXRGcmllbmREYXRhKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5aW95Y+L5o6S6KGMXHJcbiAgICAgKi9cclxuICAgIGdldEZyaWVuZERhdGEoKXtcclxuICAgICAgICBpZiAodGhpcy5pc2Rvd25Mb2FkUmFuayA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pc2Rvd25Mb2FkUmFuayA9IHRydWU7XHJcbiAgICAgICAgdmFyIF8kdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgd3guZ2V0RnJpZW5kQ2xvdWRTdG9yYWdlKHtcclxuICAgICAgICAgICAga2V5TGlzdDpbXCJmZW5SYW5rXCJdLFxyXG4gICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIisrKysrKysrKysrKysrKysrKysrKysrKysrKysrXCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgICAgIC8v5YWz5LqO5ou/5Yiw55qE5pWw5o2u6K+m57uG5oOF5Ya15Y+v5Lul5Lqn55yL5b6u5L+h5paH5qGjXHJcbiAgICAgICAgICAgICAgICAvL2h0dHBzOi8vZGV2ZWxvcGVycy53ZWl4aW4ucXEuY29tL21pbmlnYW1lL2Rldi9hcGkvVXNlckdhbWVEYXRhLmh0bWxcclxuICAgICAgICAgICAgICAgIHZhciBsaXN0RGF0YTtcclxuICAgICAgICAgICAgICAgIHZhciBvYmo7XHJcbiAgICAgICAgICAgICAgICB2YXIga3Y7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0gW107XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tLS0tLS1nZXRGcmllbmRDbG91ZFN0b3JhZ2UtLS0tLS0tLS0tLS0nKTtcclxuICAgICAgICAgICAgICAgIGlmKHJlcy5kYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwO2k8cmVzLmRhdGEubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IHJlcy5kYXRhW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighKG9iai5LVkRhdGFMaXN0Lmxlbmd0aCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+aLieWPluaVsOaNruaYr++8jOS9v+eUqOS6huWkmuWwkeS4qmtleS0gS1ZEYXRhTGlzdOeahOaVsOe7hOWwseacieWkmuWwkVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+abtOivpue7hueahEtWRGF0YeWPr+S7peafpeeci+W+ruS/oeaWh+ahozpodHRwczovL2RldmVsb3BlcnMud2VpeGluLnFxLmNvbS9taW5pZ2FtZS9kZXYvYXBpL0tWRGF0YS5odG1sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGt2ID0gb2JqLktWRGF0YUxpc3RbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGt2LmtleSE9XCJmZW5SYW5rXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrdiA9IEpTT04ucGFyc2Uoa3YudmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3REYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3REYXRhLmF2YXRhcklQID0gb2JqLmF2YXRhclVybDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdERhdGEuVXNlck5hbWUgPSBvYmoubmlja25hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3REYXRhLm9wZW5JRCA9IG9iai5vcGVuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3REYXRhLlJhbmtWYWx1ZSA9IGt2Lnd4Z2FtZS52YWx1ZTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3REYXRhLnJhbmtJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxpc3REYXRhLnVwZGF0ZV90aW1lPWt2Lnd4Z2FtZS51cGRhdGVfdGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2gobGlzdERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKGxpc3REYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy/moLnmja5SYW5rVmFsdWXmjpLluo9cclxuICAgICAgICAgICAgICAgICAgICBhcnIgPSBhcnIuc29ydChmdW5jdGlvbihhLGIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYi5SYW5rVmFsdWUgLSBhLlJhbmtWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAvL+WinuWKoOS4gOS4queUqOS6juafpeeci+eahGluZGV45o6S5ZCNXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaTwgYXJyLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJbaV0uaW5kZXggPSBpICsgMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy/orr7nva7mlbDnu4RcclxuICAgICAgICAgICAgICAgICAgICBfJHRoaXMuc2V0bGlzdChhcnIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLGZhaWw6ZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0tLeiOt+WPluaJmOeuoeaVsOaNruWksei0pS0tLS0tLS0tLS0tLS0tLS0tLS0tJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmjqXmlLbkv6Hmga9cclxuICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSDmlLbliLDnmoTkuLvln5/kvKDov4fmnaXnmoTkv6Hmga9cclxuICAgICAgICAgKi9cclxuICAgICAgICByZWNldmllRGF0YShtZXNzYWdlKXtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZmVuICE9IG51bGwgJiYgbWVzc2FnZS5mZW4gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZlbiA9IG1lc3NhZ2UuZmVuO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5rZXkgPSBtZXNzYWdlLmtleTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZkRhdGEoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDkuIrmiqXoh6rlt7HnmoTmlbDmja5cclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSDkuIrmiqXmlbDmja5cclxuICAgICAgICAgKi9cclxuICAgICAgICBzZXRTZWxmRGF0YShkYXRhKXtcclxuICAgICAgICAgICAgdmFyIGt2RGF0YUxpc3QgPSBbXTtcclxuICAgICAgICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICAgICAgICBvYmoud3hnYW1lID17fTtcclxuICAgICAgICAgICAgb2JqLnd4Z2FtZS52YWx1ZTEgPSBTdHJpbmcodGhpcy5mZW4pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk15RGF0YTogXCIgKyBvYmoud3hnYW1lLnZhbHVlMSk7XHJcbiAgICAgICAgICAgIGxldCBvdXRTZWxmID0gdGhpcztcclxuICAgICAgICAgICAgLy8gb2JqLnd4Z2FtZS51cGRhdGVfdGltZSAgPSBMYXlhLkJyb3dzZXIubm93KCk7XHJcbiAgICAgICAgICAgIGt2RGF0YUxpc3QucHVzaCh7XCJrZXlcIjpcImZlblJhbmtcIixcInZhbHVlXCI6SlNPTi5zdHJpbmdpZnkob2JqKX0pO1xyXG4gICAgICAgICAgICB3eC5zZXRVc2VyQ2xvdWRTdG9yYWdlKHtcclxuICAgICAgICAgICAgICAgIEtWRGF0YUxpc3Q6a3ZEYXRhTGlzdCxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJy0tLS0tc3VjY2VzczonICsgSlNPTi5zdHJpbmdpZnkoZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dFNlbGYuZ2V0RnJpZW5kRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZhaWw6ZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJy0tLS0tZmFpbDonICsgSlNPTi5zdHJpbmdpZnkoZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dFNlbGYuZ2V0RnJpZW5kRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOmZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCctLS0tLWNvbXBsZXRlOicgKyBKU09OLnN0cmluZ2lmeShlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0U2VsZi5nZXRGcmllbmREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6K6+572ubGlzdCBhcnJcclxuICAgICAgICAgKiBAcGFyYW0gYXJyIOi1i+WAvOeUqOeahGFyclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNldGxpc3QoYXJyKXtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdC5hcnJheSA9YXJyO1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0LnJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbn0iXX0=
